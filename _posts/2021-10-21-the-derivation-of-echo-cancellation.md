---
layout: post
title: 回声消除的推导的一点体会
tags: 语音处理
excerpt: 回声消除
---

### 回声消除的推导体会

回声消除解决问题

​	传统算法大都是线性模型，线性模型的计算一般都是 $y_t = W_t^{T}X$

​	$X$ 是列向量表示n阶的输入$x[t],x[t-1],x[t-2],...,x[t-n+1]$ 

​	$W$是针对$X$的每一个阶数估计出来的系数，然后做内积，相当于用历史的n个点，来估计当前时刻的输出点，历史的n个点分别对当前的输出点有一些贡献，这个贡献比例就是系数。

​	实际中的算法就是要求出这个系数。

​	在具体的回声消除算法中，$y$表示估计的回声信号，$X$表示参考信号

​	当我们估计出回声信号之后，然后用近端信号$d_t - y_t$就表示消除了回声。这个差值在算法中描述为$e$ ，这个$e$会反向激励$W$的计算。直到$e$不再变化，就表示收敛了。



单通道回声消除

​	对于线性部分，实质就是它了 $y_t = W_t^{T}X$

​	表示一个ref信号，对一个mic信号的回声贡献，就是$W_t^{T}$，也就是权重。



多通道回声消除

​	线性部分，实质就是对单通道回声消除的推广。

​	比如有4个mic，2个ref，那么每一个mic信号的回声，是由于多个ref信号的权重加成导致。

​	两个角度：

​	一个mic信号是所有ref信号的加成组合。

​	一个ref信号对所有的mic信号都有加成。

​	对于某一个mic其分量估计为。

​	$y_1 = W_{11}^TX_1 + W_{12}^TX_2 + ... W_{1n}^TX_n$ 

​	$y_1$表示第一个mic的回声估计值

​	$W_{11}^TX_1$表示第一个ref信号对mic1的贡献

​	$W_{12}^TX_2$表示第二个ref信号对mic1的贡献

​	....

​	$W$的第一个下表表示mic的下标，第二个下标表示ref的下标.

​	通过算式我们也能推导如下公式：

​	参数量: $m * n * r$  

​	输入量: $n*r$

​	总算力: $m*n*r*n*r = m*r^2*n^2$  

​	参数说明:

​		$m$表示mic的个数

​		$n$表示算法的阶数

​	     $r$表示ref的个数

通过公式可知：算力与r成平方关系，与m成线性关系



线性系统的好处

​	对于一个已经固定的线性系统，其物理通道不发生变化的话，一旦我们求出的权重系数，那么这个权重系数其实就是固化的。也即权重系数反映的是物理通道的性质，与物理通道强相关，物理通道一旦发声变化，权重系数就要更新.
